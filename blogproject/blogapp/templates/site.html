<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static " css/navfooter2.css" %}">
    <link rel="stylesheet" href="{% static " css/site.css" %}">
    <link href="
        https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css
        " rel="stylesheet">

    <title>블로그 게시물 작성</title>
</head>

<body>
    <header>
        <div class="NavContainer">
            <div class="NavBar">
                <a href="/"><img src="{% static " img/logo(white).svg" %}"></a>
                <div class='nav-buttons'>
                    <a href="">일상</a>
                    <a href="">요리</a>
                    <a href="">여행</a>
                    <a href="">영화</a>
                    <a href="">IT</a>
                    {% if user.is_authenticated %}
                        <a href="/logout"><button class='logout-button'>Logout</button></a>
                        <a href="posting"><button class='PrimaryButton'>Just Write!</button></a>
                    {% else %}
                        <a href="login"><button class='PrimaryButton'>Login</button></a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>
    <main>
        <!-- 제목 부분 -->
        <div class="editor-container">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{form.media}}
                {{form.as_p}}
                <br>
                <button type="submit">제출하기</button>
            </form>
        </div>
        
        <div class="container">
            <form method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="image">이미지 업로드 : </label>
                    <input type="file" class="form-control" name="image" id="image">
                </div>
            </form>
        </div>
        <button>
            <img ../static/img/>
            Ai 글 자동완성
        <button>

        <button onclick="saveDraft()">임시저장</button>
    </main>

    <footer class="footer">
        <div class="container">
            <p>Made with<span> MadeInDojo</span></p>

        </div>
    </footer>

</body>
<script>
    function saveDraft() {
        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;
        
    // 글 내용을 로컬 스토리지에 저장
        localStorage.setItem('draftTitle', title);
        localStorage.setItem('draftContent', content);
    }

    function loadDraft() {
        const savedTitle = localStorage.getItem('draftTitle');
        const savedContent = localStorage.getItem('draftContent');

        if (savedTitle || savedContent) {
            document.getElementById('title').value = savedTitle || '';
            document.getElementById('content').value = savedContent || '';
            document.getElementById('draftDisplay').innerHTML = `
                <strong>임시 저장된 제목:</strong> ${savedTitle || '없음'}<br>
                <strong>임시 저장된 내용:</strong><br>${savedContent || '없음'}
            `;
        } else {
            alert('임시 저장된 글이 없습니다.');
        }
    }

    // 페이지 로드 시 임시 저장된 글 불러오기
    window.addEventListener('load', loadDraft);
</script>
</html>