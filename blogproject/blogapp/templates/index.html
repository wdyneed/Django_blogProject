<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load humanize %}
{% load timetemplates %}
{% load extract_first_image_url %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static "css/index.css" %}">
    <link rel="stylesheet" href="{% static "css/navfooter.css" %}">
    <link href="
        https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css
        " rel="stylesheet">
</head>

<body>
    <header>
        <div class="NavContainer">
            <div class="NavBar">   
                <a href="/"><img src="{% static "img/Group 1.png" %}"></a>
                <div class='nav-buttons'>
                    <a href='/post_list/일상'>일상</a>
                    <a href='/post_list/요리'>요리</a>
                    <a href='/post_list/여행'>여행</a>
                    <a href='/post_list/영화'>영화</a>
                    <a href='/post_list/IT'>IT</a>
                    {% if user.is_authenticated %}
                        <a href="logout"><button class='PrimaryButton'>Logout</button></a>
                        <a href="/posting"><button class='PrimaryButton'>Just Write!</button></a>
                    {% else %}
                        <a href="login"><button class='PrimaryButton'>Login</button></a>
                    {% endif %}
                    
                </div>
            </div>
        </div>
        
        <article class="Container1">
            {% autoescape off %}
            <div class="container">
                {% if representpost %}
                    <div class="PostInfoBox">
                        <h3 class="Maintitle">{{ representpost.title|truncatechars:14 }}</h3>
                        <p class="MaintitleSub">{{ representpost.content|striptags|linebreaksbr|safe|truncatechars:100 }}</p>
                        <a href="/post/{{ representpost.id }}"><button class="ReadMoreBtn">READ MORE</button></a>
                    </div>
                    <div></div>
                    <div class="ThumbnailImg">
                        {% if representpost.image %}
                            <img src="{{ representpost.image.url }}">
                        {% elif representpost.content|extract_first_image_url %}
                            <img src="{{ representpost.content|extract_first_image_url }}">
                        {% else %}
                            <img src="{% static "img/기본이미지.jpg" %}">
                        {% endif %}
                    </div>
                {% else %}
                <h1 style="font-size:100px; margin-top:10px"> 글을 작성해주세요 </h1>
                {% endif %}
            </div>
            {% endautoescape %}
        </article>
        
    </header>

    <main>
        {% autoescape off %}
        <div class="container">
            {% for post in page_posts %}
            <div class="card">
                <a href='/post/{{ post.id }}'>
                    <div class="card-thumbnail-img">
                        {% if post.image %}
                            <img src="{{ post.image.url }}">
                        {% elif post.content|extract_first_image_url %}
                            <img src="{{ post.content|extract_first_image_url }}">
                        {% else %}
                            <img src="{% static "img/기본이미지.jpg" %}">
                        {% endif %}
                    </div>
                    <div class="CardInfoBox">
                        <p> {{ post.published_date|custom_timesince }}</p>
                        <h3>{{ post.title|truncatechars:14 }}</h3>
                        <p class="SubInfo">{{ post.content|striptags|linebreaksbr|safe|truncatechars:100 }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        <div class="pagination">
            <span class="step-links">
                {% if page_posts.has_previous %}
                    <a href="?page=1" style="color: black;">&laquo; 처음으로</a>
                    <a href="?page={{ page_posts.previous_page_number }}" style="color: black;">이전 페이지</a>
                {% endif %}
                {% if page_posts.has_next %}
                    <a href="?page={{ page_posts.next_page_number }}" style="color: black;">다음 페이지</a>
                    <a href="?page={{ page_posts.paginator.num_pages }}" style="color: black;">마지막 &raquo;</a>
                {% endif %}
            </span>
        </div>
        <span class="current-page">
            Page {{ page_posts.number }} of {{ page_posts.paginator.num_pages }}.
        </span>
        
        {% endautoescape %}
        
    </main>
    
    <footer class="footer">
        <div class="container">
            <p>Made with<span> Django</span></p>
        </div>
    </footer>

</body>

</html>